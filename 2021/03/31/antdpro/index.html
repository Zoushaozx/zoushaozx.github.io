<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="创建antdpro项目1yarn create umi pages   复刻资源管理1新建文件夹task&#x2F;index.jsx 1在config&#x2F;config.js 添加 &amp;#123;path: &#39;&#x2F;system&#x2F;task&#39;, component: &#39;.&#x2F;system&#x2F;task&#39;&amp;#125;, 1在资源管理页">
<meta property="og:type" content="article">
<meta property="og:title" content="antdpro">
<meta property="og:url" content="http://example.com/2021/03/31/antdpro/index.html">
<meta property="og:site_name" content="Zoux">
<meta property="og:description" content="创建antdpro项目1yarn create umi pages   复刻资源管理1新建文件夹task&#x2F;index.jsx 1在config&#x2F;config.js 添加 &amp;#123;path: &#39;&#x2F;system&#x2F;task&#39;, component: &#39;.&#x2F;system&#x2F;task&#39;&amp;#125;, 1在资源管理页">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-31T22:51:53.000Z">
<meta property="article:modified_time" content="2021-04-18T00:55:04.100Z">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>antdpro</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about">关于</a></li>
         
          <li><a href="/archives">归档</a></li>
         
          <li><a href="/projects">项目</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2021/04/04/Java%E5%B8%B8%E7%94%A8%E7%B1%BB/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2021/03/21/English-diary/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2021/03/31/antdpro/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2021/03/31/antdpro/&text=antdpro"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2021/03/31/antdpro/&is_video=false&description=antdpro"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=antdpro&body=Check out this article: http://example.com/2021/03/31/antdpro/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2021/03/31/antdpro/&name=antdpro&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2021/03/31/antdpro/&t=antdpro"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAantdpro%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.</span> <span class="toc-text">创建antdpro项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%BB%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">复刻资源管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%BB%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">复刻员工管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E6%98%BE%E6%95%B0%E6%8D%AE"><span class="toc-number">4.</span> <span class="toc-text">复显数据</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        antdpro
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name"></span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-03-31T22:51:53.000Z" itemprop="datePublished">2021-03-31</time>
        
      
    </div>


      

      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="创建antdpro项目"><a href="#创建antdpro项目" class="headerlink" title="创建antdpro项目"></a>创建antdpro项目</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create umi pages</span><br></pre></td></tr></table></figure>


<h2 id="复刻资源管理"><a href="#复刻资源管理" class="headerlink" title="复刻资源管理"></a>复刻资源管理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">新建文件夹task&#x2F;index.jsx</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在config&#x2F;config.js 添加 &#123;path: &#39;&#x2F;system&#x2F;task&#39;, component: &#39;.&#x2F;system&#x2F;task&#39;&#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在资源管理页面 添加菜单资源 </span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">渲染面包屑菜单栏</span><br><span class="line">	return (</span><br><span class="line">    &lt;PageHeaderWrapper&gt;</span><br><span class="line">     &lt;&#x2F;PageHeaderWrapper&gt;</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">渲染标签页</span><br><span class="line"></span><br><span class="line">import &#123;Tabs,&#125; from &#39;antd&#39;; 引入标签页 </span><br><span class="line">const &#123;TabPane&#125; &#x3D; Tabs; 重命名标签页</span><br><span class="line">&lt;TabPane tab&#x3D;&#123;item.text&#125; key&#x3D;&#123;item.value&#125;&gt; &lt;&#x2F;TabPane&gt; 渲染标签页</span><br><span class="line"></span><br><span class="line">链接，用于后端请求数据</span><br><span class="line">let api &#x3D; &#39;&#x2F;api&#x2F;sys&#x2F;resource&#x2F;&#39;;</span><br><span class="line">const tabsUrl &#x3D; api + &#39;clientTypeOptions&#39;;</span><br><span class="line"></span><br><span class="line">定义存放标签页的容器</span><br><span class="line">const [tabsList, setTabsList] &#x3D; useState([]);</span><br><span class="line"></span><br><span class="line">页面渲染完成后就会执行useEffect 进而执行initTabs() 参数[] 即 初始化一次</span><br><span class="line">useEffect(() &#x3D;&gt; &#123;</span><br><span class="line">    initTabs();</span><br><span class="line">  &#125;, []);</span><br><span class="line"> </span><br><span class="line">给标签页容器赋值 通过get方法 请求后端数据 </span><br><span class="line">const initTabs &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    get(tabsUrl).then(rs &#x3D;&gt; &#123;</span><br><span class="line">      setTabsList(rs);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">渲染菜单列</span><br><span class="line"></span><br><span class="line">页面渲染</span><br><span class="line">&lt;Col flex&#x3D;&quot;350px&quot;&gt;</span><br><span class="line">   &lt;Card bordered&#x3D;&#123;false&#125;&gt;</span><br><span class="line">    &#123;resourceTree &amp;&amp; resourceTree.length &gt; 0 &amp;&amp; &lt;Tree treeData&#x3D;&#123;resourceTree&#125; &#x2F;&gt;&#125;</span><br><span class="line">    &lt;&#x2F;Card&gt;</span><br><span class="line">&lt;&#x2F;Col&gt;</span><br><span class="line"></span><br><span class="line">定义数据容器 以及获取数据方法</span><br><span class="line">const [resourceTree, setResourceTree] &#x3D; useState([]);</span><br><span class="line"></span><br><span class="line">数据获取方法入口</span><br><span class="line">loadTree(&#39;&#39;, rs[0].value)</span><br><span class="line"></span><br><span class="line">数据获取方法本体</span><br><span class="line">const loadTree &#x3D; function (defaultSelectedKey, tabKey) &#123;</span><br><span class="line">    get(treeUrl, &#123;clientType: tabKey&#125;).then(tree &#x3D;&gt; &#123;</span><br><span class="line">      setResourceTree(tree);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">渲染表单</span><br><span class="line"></span><br><span class="line">定义表单</span><br><span class="line">const [form] &#x3D; Form.useForm();</span><br><span class="line"></span><br><span class="line">页面渲染</span><br><span class="line">                &lt;Form form&#x3D;&#123;form&#125; labelCol&#x3D;&#123;&#123;flex: &#39;120px&#39;&#125;&#125; wrapperCol&#x3D;&#123;&#123;flex: &#39;auto&#39;&#125;&#125;&gt;</span><br><span class="line">                  &lt;Form.Item label&#x3D;&quot;类型&quot; name&#x3D;&quot;type&quot; rules&#x3D;&#123;[&#123;required: true, message: &#39;请输入名称&#39;&#125;]&#125;&gt;</span><br><span class="line">                    &lt;Select&gt;</span><br><span class="line">                      &lt;Select.Option value&#x3D;&quot;FOLDER&quot;&gt;目录&lt;&#x2F;Select.Option&gt;</span><br><span class="line">                      &lt;Select.Option value&#x3D;&quot;MENU&quot;&gt;菜单&lt;&#x2F;Select.Option&gt;</span><br><span class="line">                      &#123;tabKey !&#x3D;&#x3D; &#39;APP&#39; &amp;&amp;</span><br><span class="line">                      &lt;Select.Option value&#x3D;&quot;FUNCTION&quot;&gt;功能&lt;&#x2F;Select.Option&gt;</span><br><span class="line">                      &#125;</span><br><span class="line">                    &lt;&#x2F;Select&gt;</span><br><span class="line">                  &lt;&#x2F;Form.Item&gt;</span><br><span class="line">                  &#123;formValueType &#x3D;&#x3D;&#x3D; &#39;FUNCTION&#39; &amp;&amp; &lt;Form.Item label&#x3D;&quot;权限码&quot; name&#x3D;&quot;code&quot;&gt;</span><br><span class="line">                    &lt;Input&#x2F;&gt;</span><br><span class="line">                  &lt;&#x2F;Form.Item&gt;&#125;</span><br><span class="line">                  &#123;tabKey &#x3D;&#x3D;&#x3D; &#39;APP&#39; &amp;&amp;</span><br><span class="line">                  &lt;&gt;</span><br><span class="line">                    &lt;Form.Item label&#x3D;&quot;权限码&quot; name&#x3D;&quot;code&quot;&gt;</span><br><span class="line">                      &lt;Input&#x2F;&gt;</span><br><span class="line">                    &lt;&#x2F;Form.Item&gt;</span><br><span class="line">                    &lt;Form.Item label&#x3D;&quot;显示系统&quot; name&#x3D;&quot;showSystem&quot;&gt;</span><br><span class="line">                      &lt;RemoteSelect url&#x3D;&#123;api + &quot;showSystemOptions&quot;&#125;&#x2F;&gt;</span><br><span class="line">                    &lt;&#x2F;Form.Item&gt;</span><br><span class="line">                  &lt;&#x2F;&gt;</span><br><span class="line">                  &#125;</span><br><span class="line">                  &#123;formValueType &#x3D;&#x3D;&#x3D; &#39;MENU&#39; &amp;&amp; tabKey !&#x3D;&#x3D; &#39;APP&#39; &amp;&amp;</span><br><span class="line">                  &lt;Form.Item label&#x3D;&quot;页面路径&quot; name&#x3D;&quot;path&quot;&gt;&lt;Input&#x2F;&gt;&lt;&#x2F;Form.Item&gt;&#125;</span><br><span class="line">                  &lt;Form.Item label&#x3D;&quot;名称&quot; name&#x3D;&quot;name&quot; rules&#x3D;&#123;[&#123;required: true, message: &#39;请输入名称&#39;&#125;]&#125;&gt;</span><br><span class="line">                    &lt;Input&#x2F;&gt;</span><br><span class="line">                  &lt;&#x2F;Form.Item&gt;</span><br><span class="line"></span><br><span class="line">                  &lt;Form.Item name&#x3D;&quot;pid&quot; label&#x3D;&quot;父节点&quot;&gt;</span><br><span class="line">                    &lt;RemoteTreeSelect url&#x3D;&#123;pidTreeUrl + &quot;?clientType&#x3D;&quot; + tabKey&#125;</span><br><span class="line">                    &#x2F;&gt;</span><br><span class="line">                  &lt;&#x2F;Form.Item&gt;</span><br><span class="line">                  &lt;Form.Item label&#x3D;&quot;显示顺序&quot; name&#x3D;&quot;seq&quot;&gt;</span><br><span class="line">                    &lt;InputNumber&#x2F;&gt;</span><br><span class="line">                  &lt;&#x2F;Form.Item&gt;</span><br><span class="line"></span><br><span class="line">                  &lt;Form.Item label&#x3D;&quot;是否停用&quot; name&#x3D;&quot;disabled&quot; valuePropName&#x3D;&quot;checked&quot;&gt;</span><br><span class="line">                    &lt;Checkbox&#x2F;&gt;</span><br><span class="line">                  &lt;&#x2F;Form.Item&gt;</span><br><span class="line"></span><br><span class="line">                  &lt;Form.Item label&#x3D;&quot;运维商权限&quot; name&#x3D;&quot;isMerchantRight&quot; valuePropName&#x3D;&quot;checked&quot;&gt;</span><br><span class="line">                    &lt;Checkbox&#x2F;&gt;</span><br><span class="line">                  &lt;&#x2F;Form.Item&gt;</span><br><span class="line"></span><br><span class="line">                  &lt;div style&#x3D;&#123;&#123;display: &quot;flex&quot;, alignItems: &quot;center&quot;, justifyContent: &quot;flex-end&quot;, marginBottom: &quot;8px&quot;&#125;&#125;&gt;</span><br><span class="line">                    &lt;div style&#x3D;&#123;&#123;marginRight: &quot;45%&quot;, marginTop: &quot;30px&quot;&#125;&#125;&gt;</span><br><span class="line">                      &lt;Button type&#x3D;&quot;primary&quot; htmlType&#x3D;&quot;submit&quot;&gt; &amp;nbsp;&amp;nbsp;保&amp;nbsp;存&amp;nbsp;&amp;nbsp; &lt;&#x2F;Button&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                  &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;Form&gt;</span><br><span class="line">                </span><br><span class="line">表单是否可编辑                 </span><br><span class="line">const [formDisabled, setFormDisabled] &#x3D; useState(true);               </span><br><span class="line">disabled&#x3D;&#123;formDisabled&#125;</span><br><span class="line"></span><br><span class="line">用来控制某些字段是否可以显示</span><br><span class="line">const [formValueType, setFormValueType] &#x3D; useState(&#39;&#39;);</span><br><span class="line">&#123;formValueType &#x3D;&#x3D;&#x3D; &#39;MENU&#39; &amp;&amp; tabKey !&#x3D;&#x3D; &#39;APP&#39; &#125;</span><br><span class="line"></span><br><span class="line">是否显示form表单</span><br><span class="line">const [showForm, setShowForm] &#x3D; useState(false);</span><br><span class="line">className&#x3D;&#123;showForm ? &#39;&#39; : &#39;hide&#39;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">选中首个树节点</span><br><span class="line"></span><br><span class="line">调用loadTree(&#39;&#39;,&quot;PC&quot;)</span><br><span class="line">const initTabs &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    get(tabsUrl).then(rs &#x3D;&gt; &#123;</span><br><span class="line">      setTabsList(rs);</span><br><span class="line">      if (rs.length &gt; 0) &#123;      &#x2F;&#x2F; 设置第一个单位为选中状态</span><br><span class="line">        setTabKey(rs[0].value);</span><br><span class="line">        loadTree(&#39;&#39;, rs[0].value)  &#x2F;&#x2F;rs[0].value&#x3D;&quot;pc&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"> </span><br><span class="line">调用loadTree(&#39;&#39;,&quot;PC&quot;) </span><br><span class="line">const loadTree &#x3D; function (defaultSelectedKey, tabKey) &#123;</span><br><span class="line">		&#x2F;&#x2F;获取tree</span><br><span class="line">    get(treeUrl, &#123;clientType: tabKey&#125;).then(tree &#x3D;&gt; &#123;</span><br><span class="line">    	&#x2F;&#x2F;赋值</span><br><span class="line">      setResourceTree(tree);</span><br><span class="line">      &#x2F;&#x2F;defaultSelectedKey有值就设置SelectedKeys</span><br><span class="line">      if (defaultSelectedKey) &#123;</span><br><span class="line">        setSelectedKeys([defaultSelectedKey])</span><br><span class="line">      &#125; else if (tree.length &gt; 0) &#123;      &#x2F;&#x2F; 设置第一个单位为选中状态</span><br><span class="line">      	&#x2F;&#x2F;tree有值就设置首节点</span><br><span class="line">        if (tree &amp;&amp; tree.length &gt; 0) &#123;</span><br><span class="line">          const first &#x3D; tree[0];</span><br><span class="line">          const k &#x3D; first.key;</span><br><span class="line">          onSelect([k], &#123;node: first&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        onSelect(null, &#123;&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;  </span><br><span class="line">  </span><br><span class="line">const onSelect &#x3D; async (keys, &#123;node&#125;) &#x3D;&gt; &#123;</span><br><span class="line">    setSelectedKeys(keys);</span><br><span class="line">    if (keys &#x3D;&#x3D; null || keys.length &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class="line">      setCurrentNode(&#123;&#125;);</span><br><span class="line">      form.setFieldsValue(&#123;&#125;);</span><br><span class="line">      form.resetFields();</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line">    setFormDisabled(true);&#x2F;&#x2F; 表单默认不可编辑状态</span><br><span class="line">    setShowForm(true);  &#x2F;&#x2F;展示表单</span><br><span class="line">    let data &#x3D; await handleGet(api + &#39;get&#39;, &#123;id: keys&#125;);  &#x2F;&#x2F;获取数据</span><br><span class="line">    setCurrentNode(data);  &#x2F;&#x2F;设置数据</span><br><span class="line">    setFormValueType(data.type);  &#x2F;&#x2F;设置数据</span><br><span class="line">    form.resetFields();  &#x2F;&#x2F;重置表单</span><br><span class="line">    form.setFieldsValue(data);  &#x2F;&#x2F;赋值表单</span><br><span class="line">  &#125;;  </span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">标签页变换事件</span><br><span class="line"></span><br><span class="line">触发入口</span><br><span class="line">onChange&#x3D;&#123;clickTabs&#125;</span><br><span class="line">&lt;Tabs defaultActiveKey&#x3D;&#123;tabKey&#125; onChange&#x3D;&#123;clickTabs&#125;  type&#x3D;&quot;card&quot; size&#x3D;&#123;&quot;small&quot;&#125;&gt;</span><br><span class="line"></span><br><span class="line">const clickTabs &#x3D; (tabKey) &#x3D;&gt; &#123;</span><br><span class="line">    setTabKey(tabKey);</span><br><span class="line">    loadTree(null,tabKey)</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="复刻员工管理"><a href="#复刻员工管理" class="headerlink" title="复刻员工管理"></a>复刻员工管理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">联级搜索</span><br><span class="line">	1⃣️useEffect 调用relationSelect方法 根据当前用户 初始化数据 unit dept post</span><br><span class="line">	2⃣️选择单位 触发 selectUnit  设置 selectValue.unit  调用findChildBy 传入参数type&#x3D;dept</span><br><span class="line">当selectValue.dept未设置时 就会调用screenTree 传入参数type&#x3D;post</span><br><span class="line">	3⃣️就会调用screenTree 回调用findChildBy方法 将会把deptList	</span><br></pre></td></tr></table></figure>


<h2 id="复显数据"><a href="#复显数据" class="headerlink" title="复显数据"></a>复显数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let apiUser &#x3D; &#39;&#x2F;api&#x2F;currentUser&#39;;</span><br><span class="line">获取数据直接初始化到form表单里面</span><br><span class="line">get(apiUser).then(value&#x3D;&gt;&#123;</span><br><span class="line">	if(&quot;user&quot; &#x3D;&#x3D;&#x3D; value.userType)&#123;</span><br><span class="line">		setFromValues(&#123;returneeId:value.id,returnDeptId:value.dept&#125;);</span><br><span class="line">		form.setFieldsValue(&#123;returneeId:value.id,returnDeptId:value.dept&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

  </div>
  <div> 
    <a href="https://github.com/Zoushaozx/zoushaozx.github.io/edit/myblog/source/_posts/antdpro.md" target="_blank">
             <!-- https://github.com/Zoushaozx/zoushaozx.github.io/edit/myblog/source/_posts/hello-world.md -->
      编辑
    </a>
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about">关于</a></li>
         
          <li><a href="/archives">归档</a></li>
         
          <li><a href="/projects">项目</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAantdpro%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.</span> <span class="toc-text">创建antdpro项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%BB%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">复刻资源管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%BB%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">复刻员工管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E6%98%BE%E6%95%B0%E6%8D%AE"><span class="toc-number">4.</span> <span class="toc-text">复显数据</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2021/03/31/antdpro/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2021/03/31/antdpro/&text=antdpro"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2021/03/31/antdpro/&is_video=false&description=antdpro"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=antdpro&body=Check out this article: http://example.com/2021/03/31/antdpro/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2021/03/31/antdpro/&title=antdpro"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2021/03/31/antdpro/&name=antdpro&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2021/03/31/antdpro/&t=antdpro"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2021
    Zoux
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about">关于</a></li>
         
          <li><a href="/archives">归档</a></li>
         
          <li><a href="/projects">项目</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
